# C语言程序设计



[TOC]

## 基本知识

1. 程序结构三种：顺序结构，循环结构，选择结构
2. 位的知识

​			bit是位，指0 or 1

​			byte是字节，一个字节 = 8 个bit

3. 算法是一定要有输出的，他可以没有输入

4. 运算符优先级中，单目运算符>双目运算符>三目运算符，算术运算符>关系运算符>逻辑运算符>赋值运算符,逗号运算符的级别最低。

5. 字符数据的合法形式:

     '1' 是字符占一个字节，"1"是字符串占两个字节(含有一个结束符号)。

    '0' 的ASCII数值表示为48，'a' 的ASCII数值是97，'A'的ASCII数值是65。

   



### 合法标识符

合法的要求是由字母，数字，下划线组成。有其它元素就错了。

并且第一个必须为字母或则是下划线。第一个为数字就错了。

关键字不可以作为用户标识符号。`main` ` define`  `scanf`  `printf` 都不是关键字。迷惑你的地方If是可以做为用户标识符。因为If中的第一个字母大写了，所以不是关键字

### main()

在C语言中，`main` 函数的两种形式是不同的。让我解释一下它们之间的区别：

1. **`int main(int argc, char \*argv[])` 形式：**
   - 这是C语言中用于处理命令行参数的标准形式。`argc` 表示命令行参数的数量，`argv` 是一个指向字符串数组的指针，每个字符串表示一个命令行参数。
   - 例如，执行 `./my_program arg1 arg2` 时，`argc` 将是3，`argv` 将包含程序名称 "my_program"、参数 "arg1" 和参数 "arg2"。
2. **`int main()` 或 `int main(void)` 形式：**
   - 这是另一种形式，表示 `main` 函数不接受任何命令行参数。这种形式在C语言中是合法的，但不提供对命令行参数的直接访问。
   - 例如，执行 `./my_program` 时，`argc` 将是1，`argv` 将包含程序名称 "my_program"。

在标准C中，带参数的 `main` 函数是被广泛接受和使用的形式，因为它允许程序处理来自命令行的输入。如果省略参数，即写成 `int main()` 或 `int main(void)`，编译器也会接受它，但这并不是标准形式，因此在处理命令行参数时会受到限制。最好根据程序的需求选择适当的 `main` 函数形式

---

### 各类数据大小

![img](https://img-blog.csdnimg.cn/img_convert/6d92d1ebc01f0bf38e9d9134399ab4c6.png)







## 用户自定义类型

### ENUM类型

如果一种数据类型的取值只有少数几种可能，并且每种取值都有自己的含义，为了提高代码的可读性，可以将它们定义为 Enum 类型，中文名为枚举。

```c
enum colors {RED, GREEN, BLUE};

printf("%d\n", RED); // 0
printf("%d\n", GREEN);  // 1
printf("%d\n", BLUE);  // 2
```

上面示例中，假定程序里面需要三种颜色，就可以使用`enum`命令，把这三种颜色定义成一种枚举类型`colors`，它只有三种取值可能`RED`、`GREEN`、`BLUE`。这时，这三个名字自动成为整数常量，编译器默认将它们的值设为数字`0`、`1`、`2`。相比之下，`RED`要比`0`的可读性好了许多。

注意，Enum 内部的常量名，遵守标识符的命名规范，但是通常都使用大写。

使用时，可以将变量声明为 Enum 类型。

```c
enum colors color;
```



上面代码将变量`color`声明为`enum colors`类型。这个变量的值就是常量`RED`、`GREEN`、`BLUE`之中的一个。

```c
color = BLUE;
printf("%i\n", color); // 2
```



上面代码将变量`color`的值设为`BLUE`，这里`BLUE`就是一个常量，值等于`2`。

typedef 命令可以为 Enum 类型起别名。

```c
typedef enum {
  SHEEP,
  WHEAT,
  WOOD,
  BRICK,
  ORE
} RESOURCE;

RESOURCE r;
```

上面示例中，`RESOURCE`是 Enum 类型的别名。声明变量时，使用这个别名即可。

还有一种不常见的写法，就是声明 Enum 类型时，在同一行里面为变量赋值。

```c
enum {
  SHEEP,
  WHEAT,
  WOOD,
  BRICK,
  ORE
} r = BRICK, s = WOOD;
```



上面示例中，`r`的值是`3`，`s`的值是`2`。

由于 Enum 的属性会自动声明为常量，所以有时候使用 Enum 的目的，不是为了自定义一种数据类型，而是为了声明一组常量。这时就可以使用下面这种写法，比较简单。

```c
enum { ONE, TWO };

printf("%d %d", ONE, TWO);  // 0 1
```



上面示例中，`enum`是一个关键字，后面跟着一个代码块，常量就在代码内声明。`ONE`和`TWO`就是两个 Enum 常量。

常量之间使用逗号分隔。最后一个常量后面的尾逗号，可以省略，也可以保留。

```c
enum { ONE, TWO, };
```



由于Enum 会自动编号，因此可以不必为常量赋值。C 语言会自动从0开始递增，为常量赋值。但是，C 语言也允许为 ENUM 常量指定值，不过只能指定为整数，不能是其他类型。因此，任何可以使用整数的场合，都可以使用 Enum 常量。

```c
enum { ONE = 1, TWO = 2 };

printf("%d %d", ONE, TWO);  // 1 2
```



Enum 常量可以是不连续的值。

```c
enum { X = 2, Y = 18, Z = -2 };
```

Enum 常量也可以是同一个值。

```c
enum { X = 2, Y = 2, Z = 2 };
```



如果一组常量之中，有些指定了值，有些没有指定。**那么，没有指定值的常量会从上一个指定了值的常量，开始自动递增赋值。**

```c
enum {
  A,    // 0
  B,    // 1
  C = 4,  // 4
  D,    // 5
  E,    // 6
  F = 3,   // 3
  G,    // 4
  H     // 5
};
```

Enum 的作用域与变量相同。如果是在顶层声明，那么在整个文件内都有效；如果是在代码块内部声明，则只对该代码块有效。如果与使用`int`声明的常量相比，Enum 的好处是更清晰地表示代码意图



> 代码实例

```c
#include "stdio.h"
//from ----BX
int main(){
    enum Lamp{
        red,
        green,
        yellow
    };
    enum Lamp lamp;
    for (lamp =red; lamp <=yellow ;lamp++) {
        switch (lamp) {
            case 0:
                printf("red\n");
                break;
            case 1:
                printf("green\n");
                break;
            case 2:
                printf("yellow\n");
                break;
            default:
                printf("error\n");
                break;
        }
    }
    return 0;
}
```



---



### 求2+22+222---

> 求Sn=a+aa+aaa+…+aa…aaa（有n个a）之值，其中a是一个数字，为2。 例如，n=5时=2+22+222+2222+22222，n由键盘输入。

```c
#include<stdio.h>
int main()
{
    int a,b,num,total=0;
    scanf("%d %d", &a, &b);
    for(int i=0;i<b;i++)
    {
        num = total*10+a;
        total += num;
    }
    printf("%d",total);
    return 0;
}
```



### 冒泡排序

> 冒泡排序

```c
#include "stdio.h"

void bubblesort(int *p,int n){
    int temp,i,j;
    for ( i = 0; i < n-1; i++)
    {
        for ( j = 0; j < n-i-1; j++)
        {
            if (*(p+j)>*(p+j+1))
            {
                temp = *(p+j);
                *(p+j)=*(p+j+1);
                *(p+j+1)=temp; 
            }
        }
        
    }
}

int main(){
    int a[]={7,5,8,0,9};
    int n;
    n =sizeof(a)/sizeof(a[0]);
    bubblesort(a,n);
    for (int  i = 0; i < n; i++)
    {
        printf("%d ",a[i]);
    } 
}
```



### strcmp的输出结果

> - 如果结果是 0，表示两个字符串相等。
> - 如果结果是负数，表示第一个字符串按字典顺序在第二个字符串之前。
> - 如果结果是正数，表示第一个字符串按字典顺序在第二个字符串之后。

```c
#include "stdio.h"
#include "string.h"

int main(){
    int a=strcmp("Abc","abc");
    printf("%d",a);
}
```





### 逗号表达式

在C语言中，逗号表达式是一种使用逗号分隔的表达式，它由多个子表达式组成，按照从左到右的顺序依次求值。整个逗号表达式的值是最右边子表达式的值。

逗号表达式的一般形式如下：

```
cCopy code
(expr1, expr2, ..., exprn)
```

在这里，`expr1` 到 `exprn` 是逗号分隔的多个表达式。

以下是逗号表达式的一些特点和用法：

1. **求值顺序：** 逗号表达式从左到右依次求值，每个子表达式的值被丢弃，只有最后一个表达式的值被返回。

   ```c
   int a = (1, 2, 3, 4);
   // 在这里，a 的值将是 4，因为逗号表达式的值是最右边表达式的值。
   ```

2. **使用场景：** 逗号表达式常用于需要在一个表达式中执行多个操作的情况，例如在 `for` 循环的初始化部分、条件部分，或者在函数调用时。

   ```c
   // 例子：在 for 循环中使用逗号表达式
   for (int i = 0, j = 10; i < 5; ++i, --j) {
       // ...
   }
   ```

   在这个例子中，逗号表达式用于在初始化和条件部分执行多个操作。

3. **返回值：** 逗号表达式的返回值是最后一个子表达式的值。

   ```c
   int result = (a = 10, a + 5);
   // 在这里，result 的值将是 15，因为逗号表达式的值是最右边表达式的值。
   ```

请注意，在某些情况下，逗号表达式可能会使代码更难阅读和理解。因此，应该谨慎使用它，确保代码的可读性



***



###  字符串中"0"的操作

​	**注意在C语言中   “”  用于字符串，   ‘’   用来单个字符**

```c
#include "stdio.h"
int main(){
    char c[]="hello world";
    c[5]=0;
    printf("%s\n",c);
    return 0;
}
```

> hello



```c
#include "stdio.h"
int main(){
    char c[]="hello world";
    c[5]='0';
    printf("%s\n",c);
    return 0;
}
```

> hello0world



***

### C语言中各个运算符的优先级

C语言中的运算符具有不同的优先级，这决定了它们在表达式中的计算顺序。以下是一些常见的C语言运算符，按照它们的优先级从高到低的顺序：

1. **函数调用、数组访问:** `func()`, `array[index]`
2. **成员访问：** `structVar.member`, `pointer->member`
3. **后缀递增和递减：** `i++`, `i--`
4. **前缀递增和递减、一元运算符：** `++i`, `--i`, `+`, `-`, `!`, `~`
5. **乘法、除法、取模：** `*`, `/`, `%`
6. **加法和减法：** `+`, `-`
7. **移位运算：** `<<`, `>>`
8. **关系运算符：** `<`, `<=`, `>`, `>=`
9. **相等性运算符：** `==`, `!=`
10. **按位与：** `&`
11. **按位异或：** `^`
12. **按位或：** `|`
13. **逻辑与：** `&&`
14. **逻辑或：** `||`
15. **条件运算符：** `? :`
16. **赋值运算符：** `=`, `+=`, `-=`, `*=`, `/=`, `%=`, `&=`, `^=`, `|=`, `<<=`, `>>=`
17. **逗号运算符：** `,`

这个列表是按照优先级从高到低排列的，具有更高优先级的运算符在表达式中会先被计算。如果不确定优先级，可以使用括号来明确表达式的计算顺序。括号具有最高的优先级，可以用来改变默认的计算次序。

请注意，这里只是列举了一些常见的运算符，而实际上C语言还有其他运算符。在编写复杂表达式时，了解运算符的优先级是很重要的，以确保表达式按照预期的方式进行计算。

***

### 编译预处理

编译预处理是C语言编译过程中的第一个阶段，它主要涉及对源代码进行一些文本处理操作。在编译预处理阶段，程序的源代码经过一系列的处理，生成经过修改的中间代码，然后传递给编译器进行后续的编译。

编译预处理器负责执行以下主要任务：

1. **宏替换（Macro Replacement）：** 处理源代码中的宏定义。宏是一种用标识符表示的代码片段，可以在源代码中多次使用。在预处理阶段，这些宏会被展开成相应的代码。

   ```c
   #define MAX(x, y) ((x) > (y) ? (x) : (y))
   
   int main() {
       int a = 5, b = 10;
       int max_value = MAX(a, b);
       // 在这里，MAX(a, b) 会被替换成 ((a) > (b) ? (a) : (b))
       return 0;
   }
   ```

2. **文件包含（File Inclusion）：** 处理`#include`指令，将指定的头文件的内容插入到源文件中。这允许在一个源文件中包含其他源文件的内容。

   ```c
   // 示例头文件：math_operations.h
   // 包含一些数学运算的函数声明
   int add(int a, int b);
   int subtract(int a, int b);
   
   // 主程序文件
   #include "math_operations.h"
   
   int main() {
       int result = add(5, 3);
       // ...
       return 0;
   }
   ```

3. **条件编译（Conditional Compilation）：** 处理条件编译指令，例如 `#if`、`#ifdef`、`#ifndef`、`#else`、`#elif` 和 `#endif`，根据条件选择性地编译或排除代码块。

   ```c
   #define DEBUG 1
   #ifdef DEBUG
       // 在调试模式下编译的代码块
       printf("Debugging is enabled.\n");
   #else
       // 在非调试模式下编译的代码块
       printf("Debugging is disabled.\n");
   #endif
   ```

4. **去除注释（Comments Removal）：** 删除源代码中的注释，以便简化后续编译阶段。

   ```c
   // 这是一个注释
   int main() {
       // 这也是一个注释
       return 0;
   }
   ```

编译预处理器产生的输出是经过上述处理后的中间代码，这个中间代码将在后续的编译阶段进行分析和转换，最终生成可执行文件。

 

> C 语言的一部分，不占运行时间，不要加分号。C 语言编译的程序称为源程序，它以ASCII 数值存放在文本文件中。



### 强制类型转化

强制类型转换：

  一定是 （int）a 不是 int（a），注意类型上一定有括号的。

  注意（int）（a+b） 和（int）a+b 的区别。前是把a+b 转型，后是把a 转型再加b。



### math库

这些函数是C语言中用于数学计算的标准库函数，位于 `<math.h>` 头文件中。以下是它们的简要说明：

1. **`sqrt()` - 平方根函数:**
   - 函数原型： `double sqrt(double x);`
   - 功能：计算参数 `x` 的平方根。
   - 示例：`double result = sqrt(25.0); // 结果为5.0`
2. **`fabs()` - 绝对值函数:**
   - 函数原型： `double fabs(double x);`
   - 功能：计算参数 `x` 的绝对值。
   - 示例：`double result = fabs(-10.5); // 结果为10.5`
3. **`pow()` - 指数函数:**
   - 函数原型： `double pow(double x, double y);`
   - 功能：计算 `x` 的 `y` 次方。
   - 示例：`double result = pow(2.0, 3.0); // 结果为8.0`
4. **`sin()` - 正弦函数:**
   - 函数原型： `double sin(double x);`
   - 功能：计算弧度值 `x` 的正弦值。
   - 示例：`double result = sin(1.5708); // 结果为1.0`（对应于π/2）

这些函数提供了基本的数学运算，可以用于在C程序中执行各种数学计算。请注意，这些函数返回的结果都是 `double` 类型的浮点数。如果你需要整数结果，可以进行适当的类型转换。

***



### memcpy操作

```c
#include "stdio.h"
#include "string.h"

int main(){
    char a[]="hello";
    char b[20];
    memccpy(b,a,'l',strlen(a)+1);
    printf("%s",b);
    return 0;
}
```

> `void *memccpy(void *dest, const void *src, int c, size_t n);`

***

### 字符指针与字符数组

```c
#include "stdio.h"
int main(){
    char *format;
    format="a=%d,b=%d,c=%d";
    printf(format,1,2,3);
    return 0;
}
```

相当于：`printf("a=%d,b=%d",a,b)`



```c
#include "stdio.h"

int main(void){
    char c[]="hello";
    char * p="hello";
    c[2]='a';//可以修改
    p[2]='a';//不可以修改
    printf("%s\n",c);
    printf("%s\n",p);
    return 0;
}
```

> 上述实例中说明:字符串声明为指针时可以修改，声明为数组时不可以修改

为什么字符串声明为指针时不能修改，声明为数组时就可以修改？原因是系统会将字符串的字面量保存在内存的常量区，这个区是不允许用户修改的。声明为指针时，指针变量存储的值是一个指向常量区的内存地址，因此用户不能通过这个地址去修改常量区。但是，声明为数组时，编译器会给数组单独分配一段内存，字符串字面量会被编译器解释成字符数组，逐个字符写入这段新分配的内存之中，而这段新内存是允许修改的。



```c
#include "stdio.h"

int main(void){
    char c[]="hello";
//   c="world";   --->  error
    printf("%s\n",c);
    char * p="hello";
    printf("%s\n",p);
    p="world";
    printf("%s\n",p);
    return 0;
}
```

```c
// 以上代码说明：数组名是常量，不能被赋值，而指针变量是变量，可以被赋值
```



***

### 输出格式

`printf()`可以定制占位符的输出格式。

（1）限定宽度

`printf()`允许限定占位符的最小宽度。

```
printf("%5d\n", 123); // 输出为 "  123"
```



上面示例中，`%5d`表示这个占位符的宽度至少为5位。如果不满5位，对应的值的前面会添加空格。

输出的值默认是右对齐，即输出内容前面会有空格；如果希望改成左对齐，在输出内容后面添加空格，可以在占位符的`%`的后面插入一个`-`号。

```
printf("%-5d\n", 123); // 输出为 "123  "
```



上面示例中，输出内容`123`的后面添加了空格。

对于小数，这个限定符会限制所有数字的最小显示宽度。

```
// 输出 "  123.450000"
printf("%12f\n", 123.45);
```



上面示例中，`%12f`表示输出的浮点数最少要占据12位。由于小数的默认显示精度是小数点后6位，所以`123.45`输出结果的头部会添加2个空格。

（2）总是显示正负号

默认情况下，`printf()`不对正数显示`+`号，只对负数显示`-`号。如果想让正数也输出`+`号，可以在占位符的`%`后面加一个`+`。

```
printf("%+d\n", 12); // 输出 +12
printf("%+d\n", -12); // 输出 -12
```



上面示例中，`%+d`可以确保输出的数值，总是带有正负号。

（3）限定小数位数

输出小数时，有时希望限定小数的位数。举例来说，希望小数点后面只保留两位，占位符可以写成`%.2f`。

```
// 输出 Number is 0.50
printf("Number is %.2f\n", 0.5);
```



上面示例中，如果希望小数点后面输出3位（`0.500`），占位符就要写成`%.3f`。

这种写法可以与限定宽度占位符，结合使用。

```
// 输出为 "  0.50"
printf("%6.2f\n", 0.5);
```



上面示例中，`%6.2f`表示输出字符串最小宽度为6，小数位数为2。所以，输出字符串的头部有两个空格。

最小宽度和小数位数这两个限定值，都可以用`*`代替，通过`printf()`的参数传入。

```
printf("%*.*f\n", 6, 2, 0.5);

// 等同于
printf("%6.2f\n", 0.5);
```



上面示例中，`%*.*f`的两个星号通过`printf()`的两个参数`6`和`2`传入。

（4）输出部分字符串

`%s`占位符用来输出字符串，默认是全部输出。如果只想输出开头的部分，可以用`%.[m]s`指定输出的长度，其中`[m]`代表一个数字，表示所要输出的长度。

```
// 输出 hello
printf("%.5s\n", "hello world");
```



上面示例中，占位符`%.5s`表示只输出字符串“hello world”的前5个字符，即“hello”。



### struct结构

```c
// Created by lenovo on 2023/11/28.
#include "stdio.h"
int main(){
    struct student{
        char name;
        char sex;
        int age;
        int score;
    }stu2={'bx','m',19,99};
    struct student stu1={'a','b',18,90};
    printf("%d\n",stu1.age);
    printf("%d\n",stu2.age);
}

```







